{"meta":{"title":"Slevin\\'s Blog","subtitle":null,"description":null,"author":"Slevin Hsu","url":"http://blog.slevinhsu.com"},"pages":[{"title":"tags","date":"2018-03-14T07:27:10.000Z","updated":"2018-03-14T07:27:37.000Z","comments":false,"path":"tags/index.html","permalink":"http://blog.slevinhsu.com/tags/index.html","excerpt":"","text":""},{"title":"categories","date":"2018-03-14T07:27:49.000Z","updated":"2018-03-14T07:28:17.000Z","comments":false,"path":"categories/index.html","permalink":"http://blog.slevinhsu.com/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"NGINX 代理TOMCAT请求与静态缓存","slug":"NGINX 代理TOMCAT请求与静态缓存","date":"2018-04-25T10:33:18.000Z","updated":"2018-04-28T08:10:50.227Z","comments":true,"path":"2018/04/25/NGINX 代理TOMCAT请求与静态缓存/","link":"","permalink":"http://blog.slevinhsu.com/2018/04/25/NGINX 代理TOMCAT请求与静态缓存/","excerpt":"","text":"通常情况下，我们会使用一个静态Web容器代理Tomcat或Jetty容器中的网络请求，实现将动态请求部分交由Tomcat处理，静态文件由Nginx来做缓存管理。 安装系统环境1CentOS 6.5 安装Nginx1yum install nginx 安装Tomcat1访问 http://tomcat.apache.org/ 下载与jre相适应的Tomcat 配置配置Nginx通过yum安装的Nginx配置一般位于/etc/nginx/目录，而server的配置文件主要在/etc/nginx/conf.d/目录。打开默认的default.conf文件或新建一个，建立如下配置： 1234567891011121314151617181920212223242526272829303132333435363738## HTTPS server configuration#server &#123; listen 80; server_name &quot;~^(?&lt;sub&gt;.+)\\.example\\.com$&quot;; # 代理*.example.com域名的请求 root /usr/share/nginx/html/$sub; # 并根据二级域名请求对于目录的资源 error_page 404 /404.html; location = /40x.html &#123; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; &#125; location ~* \\.(css|js|gif|jpe?g|png|xlsx?|docx?|apk|ipa|ico| mp3|ogg|eot|woff2?|svg|ttf|pdf|html?)$ &#123; expires 7d; &#125;# 代理这些后缀的静态文件，过期日期为7天，缓存时间设置长一点可极大的 # 提升再次打开页面的速度，但也会对实时更新造成影响。 location / &#123; try_files $uri $uri/ =404; &#125; # 默认由Nginx代理所有请求 location ~ ^/(sysa|sysb)/ &#123; proxy_pass http://127.0.0.1:8080; proxy_set_header X-Forwarded-Host $host; proxy_set_header X-Forwarded-Server $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto https; proxy_redirect off; proxy_connect_timeout 240; proxy_send_timeout 240; proxy_read_timeout 240; &#125; # sysa这些相当于war包的名字&#125; 文件目录说明Tomcat存放War包的目录： /usr/share/tomcat/webapps/sysa.war /usr/share/tomcat/webapps/sysb.war Nginx静态文件目录如下所示： /usr/share/nginx/html/www/sysa /usr/share/nginx/html/www/sysb 在Nginx静态目录中www指的是二级域名，所以也可以改成其他目录，sysa、sysb这2个目录中主要存储这2个Web工程的静态文件。 访问配置完成后，通过service nginx restart启动Nginx。 通过tomcat/bin/startup.bat启动Tomcat。 然后浏览器输入如下地址访问，请自行替换成自己的二级域名： http://wwww.example.com/sysa/","categories":[],"tags":[{"name":"NGINX","slug":"NGINX","permalink":"http://blog.slevinhsu.com/tags/NGINX/"}]},{"title":"Hello World","slug":"hello-world","date":"2018-04-25T10:12:54.145Z","updated":"2018-03-12T07:19:03.000Z","comments":true,"path":"2018/04/25/hello-world/","link":"","permalink":"http://blog.slevinhsu.com/2018/04/25/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}